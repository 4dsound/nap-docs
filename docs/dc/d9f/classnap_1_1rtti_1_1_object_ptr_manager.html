<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="../../content/icon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAP: ObjectPtrManager Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Nunito+Sans" rel="stylesheet">
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript">
  function inlineSVGfromIFrame () {
    console.log("blaaat")
    var alreadyImported = Boolean(document.querySelectorAll('.dyncontent svg').length)
    if (alreadyImported) return
    var allIFrames = document.querySelectorAll('.dyncontent iframe')
    var allContentBoxes = document.querySelectorAll('.dyncontent .center')
    allIFrames.forEach(function(iFrame, index) {
      var svgElem = iFrame.contentWindow.document.documentElement.cloneNode(true)
      allContentBoxes[index].appendChild(svgElem)
      iFrame.style.display = 'none'
    })
  }
  window.addEventListener("load", inlineSVGfromIFrame, false)
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://nap.tech"><img alt="Logo" src="../../nap_tech_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;"><a href="http://www.napframework.com">
   <div id="projectname">NAP
   </div>
  </a>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d3/d14/namespacenap.html">nap</a></li><li class="navelem"><a class="el" href="../../d5/d40/namespacenap_1_1rtti.html">rtti</a></li><li class="navelem"><a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html">ObjectPtrManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../d8/d2e/classnap_1_1rtti_1_1_object_ptr_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ObjectPtrManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d0/d30/objectptr_8h_source.html">rtti/objectptr.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a019756a60a51fa3bf894490d6fe26265"><td class="memItemLeft" align="right" valign="top">typedef std::unordered_set&lt; <a class="el" href="../../d7/dcb/classnap_1_1rtti_1_1_object_ptr_base.html">ObjectPtrBase</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html#a019756a60a51fa3bf894490d6fe26265">ObjectPtrSet</a></td></tr>
<tr class="separator:a019756a60a51fa3bf894490d6fe26265"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a26d10111997cd129bbcc2f53becd8c00"><td class="memTemplParams" colspan="2">template&lt;class OBJECTSBYIDMAP &gt; </td></tr>
<tr class="memitem:a26d10111997cd129bbcc2f53becd8c00"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html#a26d10111997cd129bbcc2f53becd8c00">patchPointers</a> (OBJECTSBYIDMAP &amp;newTargetObjects)</td></tr>
<tr class="separator:a26d10111997cd129bbcc2f53becd8c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa49a37fb8facbfdbfce52d3579c843aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html#aa49a37fb8facbfdbfce52d3579c843aa">resetPointers</a> (const <a class="el" href="../../de/d01/classnap_1_1rtti_1_1_object.html">rtti::Object</a> &amp;targetObject)</td></tr>
<tr class="separator:aa49a37fb8facbfdbfce52d3579c843aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7a7dbf25680dc7e70847111313bb3ad6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html">ObjectPtrManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html#a7a7dbf25680dc7e70847111313bb3ad6">get</a> ()</td></tr>
<tr class="separator:a7a7dbf25680dc7e70847111313bb3ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>Holds a set of all ObjectPtrs in the application. The purpose of the manager is to be able to retarget ObjectPtrs if objects get replaced by another object in the real-time updating system.</p>
<p>The way this is done is by storing <em>pointers to ObjectPtrs</em>. The reason is that this makes it possible to alter the contents of the pointer at any time without introducing an extra indirection: the <a class="el" href="../../dd/d7c/classnap_1_1rtti_1_1_object_ptr.html">ObjectPtr</a> just behaves as a regular pointer. Because we are storing pointers, we need to make sure that at any time the <a class="el" href="../../dd/d7c/classnap_1_1rtti_1_1_object_ptr.html">ObjectPtr</a> moves in memory, we should remove/add the <a class="el" href="../../dd/d7c/classnap_1_1rtti_1_1_object_ptr.html">ObjectPtr</a> from the manager. This is done by the <a class="el" href="../../dd/d7c/classnap_1_1rtti_1_1_object_ptr.html">ObjectPtr</a> on every possible occasion where they are moved from on location in memory to another.</p>
<p>One possible thing to note is that when objects get destructed, but the destructor isn't called (which is obviously incorrect), this may cause dangling pointers in this manager. The only case where this may happen is when destructors aren't virtual and the derived class holds ObjectPtrs. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a019756a60a51fa3bf894490d6fe26265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a019756a60a51fa3bf894490d6fe26265">&#9670;&nbsp;</a></span>ObjectPtrSet</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unordered_set&lt;<a class="el" href="../../d7/dcb/classnap_1_1rtti_1_1_object_ptr_base.html">ObjectPtrBase</a>*&gt; <a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html#a019756a60a51fa3bf894490d6fe26265">ObjectPtrSet</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7a7dbf25680dc7e70847111313bb3ad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a7dbf25680dc7e70847111313bb3ad6">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html">ObjectPtrManager</a>&amp; get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the global <a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html">ObjectPtrManager</a>. </p>

</div>
</div>
<a id="a26d10111997cd129bbcc2f53becd8c00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26d10111997cd129bbcc2f53becd8c00">&#9670;&nbsp;</a></span>patchPointers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void patchPointers </td>
          <td>(</td>
          <td class="paramtype">OBJECTSBYIDMAP &amp;&#160;</td>
          <td class="paramname"><em>newTargetObjects</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Patches pointers in the <a class="el" href="../../dc/d9f/classnap_1_1rtti_1_1_object_ptr_manager.html">ObjectPtrManager</a> to objects in the newTargetObjects map. The pointers are matched by comparing IDs of the objects being pointed to. This function is a template so we can deal with different kinds of values in the map; the key must always be a string, but the value may be a smart pointer or raw pointer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newTargetObjects</td><td>Map from string ID to RTTIObject pointer (either raw or smart pointer, as long as it can be dereferenced). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa49a37fb8facbfdbfce52d3579c843aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa49a37fb8facbfdbfce52d3579c843aa">&#9670;&nbsp;</a></span>resetPointers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetPointers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d01/classnap_1_1rtti_1_1_object.html">rtti::Object</a> &amp;&#160;</td>
          <td class="paramname"><em>targetObject</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resets all ObjectPtrs to the specified object to nullptr </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">targetObject</td><td>The object to which ObjectPtrs are pointing to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<a href="http://www.doxygen.org/index.html"> Generated by doxygen</a></small></address>
</body>
</html>
